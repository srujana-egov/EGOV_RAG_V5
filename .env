# Database Configuration
PGUSER=neondb_owner
PGPASSWORD=npg_UfakhcQ9MdL5
PGHOST=ep-gentle-queen-a1gqdwzu.ap-southeast-1.aws.neon.tech
PGPORT=5432
PGDATABASE=neondb
PGSSLMODE=require

# Chunking
CHUNK_TARGET_TOKENS = 1000
CHUNK_OVERLAP_TOKENS = 200
CHUNK_MIN_CHARS = 400
CHUNK_MAX_CHARS = 10000
CHUNK_ENABLE_ATOMICS = false

# Crawling
FOLLOW_LINKS = 1
MAX_DEPTH = 3
MAX_LINKS = 100
FETCH_DELAY_MS = 150
HTTP_TIMEOUT = 10

# Health docs crawling
HEALTH_ROOT_URL = https://docs.digit.org/health
HEALTH_ALLOWED_HOST = docs.digit.org
HEALTH_OUT_DIR = data/gitbook_pages
HEALTH_MAX_PAGES = 800
HEALTH_MAX_DEPTH = 4
HEALTH_FETCH_DELAY_S = 0.2
HEALTH_HTTP_TIMEOUT = 10

# Embeddings & retrieval
EMBEDDING_MODEL = text-embedding-3-small
EMBED_DIM = 1536
EMBED_NORMALIZE = 1
DISTANCE_METRIC = cosine

HYBRID_ALPHA = 0.35
BM25_K1 = 1.2
BM25_B = 0.75

RERANK_ENABLED = 1
RERANK_TOPK = 50
RERANK_FINAL_K = 10
RERANK_MODEL = cohere/rerank-3

# Crawler resilience
HTTP_MAX_RETRIES = 3
HTTP_BACKOFF_S = 0.25
USER_AGENT = RAG-Ingest/1.0 (+https://docs.digit.org)

# Ingestion runtime
INGEST_CONCURRENCY = 4
UPSERT_BATCH = 128

# Tagging
DOC_PRODUCT = HCM
DOC_SOURCE = health_docs
